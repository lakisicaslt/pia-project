<div class="container">
  <h2>Spisak vlasnika:</h2>
  <table class="table table-striped table-responsive">
    <thead>
      <tr>
        <th>Korisnicko Ime</th>
        <th>Ime</th>
        <th>Prezime</th>
        <th>Pol</th>
        <th>Adresa</th>
        <th>Kontakt telefon</th>
        <th>Dugmad</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let k of korisnici">
        <td>{{k.username}}</td>
        <td>{{k.ime}}</td>
        <td>{{k.prezime}}</td>
        <td>{{k.pol}}</td>
        <td>{{k.adresa}}</td>
        <td>{{k.kontakt_telefon}}</td>
        <td>
          <button class="btn btn-primary btn-sm" (click)="azuriraj(k.username)">Azuriraj</button>
          <button class="btn btn-danger btn-sm" (click)="deaktiviraj(k.username)">Deaktiviraj</button>
        </td>
      </tr>
    </tbody>
  </table>

  <h2>Spisak dekoratora:</h2>
  <table class="table table-striped table-responsive">
    <thead>
      <tr>
        <th>Korisnicko Ime</th>
        <th>Ime</th>
        <th>Prezime</th>
        <th>Pol</th>
        <th>Adresa</th>
        <th>Kontakt telefon</th>
        <th>Dugmad</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let k of dekoratori">
        <td>{{k.username}}</td>
        <td>{{k.ime}}</td>
        <td>{{k.prezime}}</td>
        <td>{{k.pol}}</td>
        <td>{{k.adresa}}</td>
        <td>{{k.kontakt_telefon}}</td>
        <td>
          <button class="btn btn-primary btn-sm" (click)="azuriraj(k.username)">Azuriraj</button>
          <button class="btn btn-danger btn-sm" (click)="deaktiviraj(k.username)">Deaktiviraj</button>
        </td>
      </tr>
    </tbody>
  </table>

  <h2>Spisak firmi:</h2>
  <table class="table table-striped table-responsive">
    <thead>
      <tr>
        <th>Ime firme</th>
        <th>Adresa</th>
        <th>Spisak usluga</th>
        <th>Lokacija</th>
        <th>Kontakt osoba</th>
        <th>Zaposleni:</th>
        <th>Zaposli:</th>
        <th>Datum pocetka odmora:</th>
        <th>Datum kraja odmora:</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let k of firme">
        <td>{{k.ime}}</td>
        <td>{{k.adresa}}</td>
        <td>
          <ul>
            <li *ngFor="let usluga of k.usluge">{{usluga.naziv}}: {{usluga.cena}}</li>
          </ul>
        </td>
        <td>{{k.lokacija}}</td>
        <td>{{k.kontakt_osoba}}</td>
        <td>
          <ul *ngIf="k.zaposleni.length >= 2; else noEmployees">
            <li *ngFor="let zaposleni of k.zaposleni">{{zaposleni.username}}</li>
          </ul>
          <ng-template #noEmployees>Nema dovoljno zaposlenih</ng-template>
        </td>
        <td>
          <button class="btn btn-success btn-sm" (click)="zaposli(k.ime)">Zaposli</button>
        </td>
        <td>{{k.datum_pocetka}}</td>
        <td>{{k.datum_kraja}}</td>
      </tr>
    </tbody>
  </table>

  <h2>Forma za dodavanje firmi:</h2>
  <form>
    <div class="form-group">
      <label for="ime_firme">Naziv firme:</label>
      <input type="text" class="form-control" name="ime_firme" [(ngModel)]="ime_firme">
    </div>

    <div class="form-group">
      <label for="adresa_firme">Adresa:</label>
      <input type="text" class="form-control" name="adresa_firme" [(ngModel)]="adresa_firme">
    </div>

    <div class="form-group">
      <label for="usluga_naziv">Usluga naziv:</label>
      <input type="text" class="form-control" name="usluga_naziv" [(ngModel)]="usluga_naziv">
    </div>

    <div class="form-group">
      <label for="usluga_cena">Usluga cena:</label>
      <input type="number" class="form-control" name="usluga_cena" [(ngModel)]="usluga_cena">
      <button type="button" class="btn btn-info" (click)="dodajUslugu()">Dodaj uslugu</button>
    </div>

    <div class="form-group">
      <label for="lokacija">Lokacija:</label>
      <input type="text" class="form-control" name="lokacija" [(ngModel)]="lokacija">
    </div>

    <div class="form-group">
      <label for="kontakt_osoba">Kontakt osoba:</label>
      <input type="text" class="form-control" name="kontakt_osoba" [(ngModel)]="kontakt_osoba">
    </div>

    <div class="form-group">
      <label for="datum_pocetka">Datum početka godišnjeg odmora:</label>
      <input type="date" class="form-control" name="datum_pocetka" [(ngModel)]="datum_pocetka">
    </div>

    <div class="form-group">
      <label for="datum_kraja">Datum kraja godišnjег odmора:</label>
      <input type="date" class="form-control" name="datum_kraja" [(ngModel)]="datum_kraja">
    </div>

    <button type="button" class="btn btn-primary" (click)="dodajFirmu()">Dodaj firmu</button>
    <br>
    {{message}}
  </form>

  <h2>Registracija dekoratera</h2>
  <form>
    <div class="form-group">
      <label for="ime_dekoratera">Ime:</label>
      <input type="text" class="form-control" name="ime_dekoratera" [(ngModel)]="ime">
    </div>

    <div class="form-group">
      <label for="prezime">Prezime:</label>
      <input type="text" class="form-control" name="prezime" [(ngModel)]="prezime">
    </div>

    <div class="form-group">
      <label for="pol">Pol:</label><br>
      <input type="radio" name="pol" [(ngModel)]="pol" value="M">M
      <input type="radio" name="pol" [(ngModel)]="pol" value="Ž">Ž
    </div>

    <div class="form-group">
      <label for="adresa">Adresa:</label>
      <input type="text" class="form-control" name="adresa_dekoratera" [(ngModel)]="adresa">
    </div>

    <div class="form-group">
      <label for="kontakt_telefon">Kontakt telefon:</label>
      <input type="text" class="form-control" name="kontakt_telefon" [(ngModel)]="kontakt_telefon">
    </div>

    <div class="form-group">
      <label for="email_adresa">Email adresa:</label>
      <input type="email" class="form-control" name="email_adresa" [(ngModel)]="email_adresa">
    </div>



    <div class="form-group">
      <label for="broj_kreditne_kartice">Broj kreditne kartice:</label>
      <input type="text" class="form-control" name="broj_kreditne_kartice" [(ngModel)]="broj_kreditne_kartice" (input)="validateCard()">
      <img *ngIf="cardIcon" [src]="cardIcon" alt="Card Type Icon" class="mt-2" width="50px" height="30px">
      <small class="text-danger" *ngIf="!isCardValid">{{ errorMessage }}</small>
    </div>

    <div class="form-group">
      <label for="username">Username:</label>
      <input type="text" class="form-control" name="username" [(ngModel)]="username">
    </div>

    <div class="form-group">
      <label for="password">Password:</label>
      <input type="password" class="form-control" name="password" [(ngModel)]="password">
    </div>

    <button type="button" class="btn btn-success" (click)="registruj_dekoratera()">Registruj se</button>
  </form>

  {{porukica}}

  <h2>Spisak neaktiviranih vlasnika:</h2>
  <table class="table table-striped table-responsive">
    <thead>
      <tr>
        <th>Korisnicko Ime</th>
        <th>Ime</th>
        <th>Prezime</th>
        <th>Pol</th>
        <th>Adresa</th>
        <th>Kontakt telefon</th>
        <th>Dugmad</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let k of korisnici_neaktivni">
        <td>{{k.username}}</td>
        <td>{{k.ime}}</td>
        <td>{{k.prezime}}</td>
        <td>{{k.pol}}</td>
        <td>{{k.adresa}}</td>
        <td>{{k.kontakt_telefon}}</td>
        <td>
          <button class="btn btn-primary btn-sm" (click)="prihvati(k.username)">Prihvati zahtev</button>
          <button class="btn btn-danger btn-sm" (click)="odbij(k.username)">Odbij zahtev</button>
        </td>
      </tr>
    </tbody>
  </table>
  {{poruka}}
</div>
